{% extends "base.html" %}
{% block content %}
  <div class="hero-card">
    <h2 class="hero-title">Supletivo Online – Conclusão com segurança</h2>
    <p class="hero-sub">Escolha um plano e conclua seu pagamento com cartão de crédito via Cielo.</p>
  </div>

  <div class="features" style="margin-top:14px;">
    <div class="feature-item">
      <div class="feature-icon" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="28" height="28" fill="none">
          <rect x="3" y="4" width="18" height="18" rx="2" stroke="#0d6efd" stroke-width="2"/>
          <line x1="3" y1="10" x2="21" y2="10" stroke="#0d6efd" stroke-width="2"/>
          <line x1="7" y1="2" x2="7" y2="6" stroke="#0d6efd" stroke-width="2"/>
          <line x1="17" y1="2" x2="17" y2="6" stroke="#0d6efd" stroke-width="2"/>
        </svg>
      </div>
      <div>
        <div class="feature-title">Prazo conforme o plano</div>
        <div class="feature-text">O certificado é emitido de acordo com o prazo do plano escolhido.</div>
      </div>
    </div>
    <div class="feature-item">
      <div class="feature-icon" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="28" height="28" fill="none">
          <rect x="3" y="5" width="18" height="14" rx="2" stroke="#0d6efd" stroke-width="2"/>
          <polyline points="3,7 12,13 21,7" fill="none" stroke="#0d6efd" stroke-width="2"/>
        </svg>
      </div>
      <div>
        <div class="feature-title">Entrega por Correios</div>
        <div class="feature-text">Você recebe o certificado impresso via Correios, com registro e segurança.</div>
      </div>
    </div>
    <div class="feature-item">
      <div class="feature-icon" aria-hidden="true">
        <svg viewBox="0 0 24 24" width="28" height="28" fill="none">
          <path d="M12 2l7 4v6c0 5-3.5 8.5-7 10-3.5-1.5-7-5-7-10V6l7-4z" stroke="#0d6efd" stroke-width="2" fill="none"/>
          <polyline points="8,12 11,15 16,10" fill="none" stroke="#28a745" stroke-width="2"/>
        </svg>
      </div>
      <div>
        <div class="feature-title">Validade nacional</div>
        <div class="feature-text">Certificado válido em todo o Brasil conforme diretrizes educacionais vigentes.</div>
      </div>
    </div>
  </div>

  <div class="card" style="margin-top:14px;">
    <h2>Planos de Supletivo Online</h2>
    <div class="grid grid-plans" id="plans">
      {% for p in plans %}
        {% set plan_class = 'plan-neutral' %}
        {% if p.id == '30d' %}
          {% set plan_class = 'plan-red' %}
        {% elif p.id == '3m' %}
          {% set plan_class = 'plan-yellow' %}
        {% elif p.id == '6m' %}
          {% set plan_class = 'plan-green' %}
        {% endif %}
        <div class="card plan-card {{ plan_class }}" data-plan-id="{{ p.id }}">
          <h3 class="plan-title">{{ p.label }}</h3>
          <div class="plan-price">Preço: R$ {{ '%.2f'|format(p.price_brl) }}</div>
          {% if p.id == '30d' %}
            <p class="plan-desc">Certificado emitido conforme o prazo: 30 dias.</p>
          {% else %}
            <p class="plan-desc">Certificado emitido conforme o prazo: {{ p.months }} {{ 'mês' if p.months == 1 else 'meses' }}.</p>
          {% endif %}
          <div class="plan-meta muted">Entrega impressa via Correios, certificado com validade nacional.</div>
          <a class="btn btn-primary" href="{{ url_for('checkout', plan_id=p.id) }}">Ir para checkout</a>
        </div>
      {% endfor %}
    </div>
  </div>

  <div class="hero-card" style="margin-top:14px;">
    <h2 class="hero-title">Como funciona a conclusão</h2>
    <p class="hero-sub">
      Após o pagamento, você acessa aulas e materiais conforme o plano escolhido. A avaliação segue as diretrizes da escola; o certificado é emitido conforme o prazo do plano e os trâmites administrativos após a aprovação.
    </p>
  </div>

  <div class="card">
    <h2>Doação (Plano separado)</h2>
    <div class="grid">
      <div class="card plan-card plan-neutral">
        <strong>Plano: Doação</strong>
        <div class="plan-price">Valor: R$ 1,00</div>
        <div class="muted">Parcela: R$ 1,00 (1x)</div>
      </div>
      <div class="card">
        <div class="donation-info">
          <div class="donation-icon" aria-hidden="true">
            <svg viewBox="0 0 24 24" width="28" height="28" fill="none">
              <path d="M12 21s-7-4.35-7-10a7 7 0 0 1 14 0c0 5.65-7 10-7 10z" stroke="#dc3545" stroke-width="2" fill="none"/>
              <path d="M9.5 11.5c1.2-1.2 3.8-1.2 5 0" stroke="#dc3545" stroke-width="2"/>
            </svg>
          </div>
          <div>
            <div class="feature-title">Por que doar R$ 1,00?</div>
            <div class="feature-text">Sua contribuição ajuda a manter a plataforma acessível e segura para todos os alunos. O valor é simbólico e processado com segurança.</div>
          </div>
        </div>
        <a class="btn btn-primary" href="{{ url_for('donation_checkout') }}">Ir para checkout da doação</a>
      </div>
    </div>
  </div>
  <script>
    // Nenhuma lógica de parcelas aqui; o cálculo será feito na página de checkout
  </script>
{% endblock %}